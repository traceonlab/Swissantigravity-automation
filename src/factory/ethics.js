const ETHICS_RULES = [
  // ðŸš« Ù…Ù…Ù†ÙˆØ¹ Ø´Ø±Ø¹Ù‹Ø§ â€” ÙŠÙØ±ÙØ¶ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ù‘Ø§
  {
    name: "Ø§Ø®ØªØ±Ø§Ù‚ ÙˆØ§Ù†ØªØ­Ø§Ù„",
    pattern: /Ø§Ø®ØªØ±Ø§Ù‚|ØªÙ‡ÙƒÙŠØ±|Ø§Ø®ØªØ±Ø§Ù‚ Ø­Ø³Ø§Ø¨|Ø§Ù†ØªØ­Ø§Ù„ Ù‡ÙˆÙŠØ©|Ø³Ø±Ù‚Ø© Ø¨ÙŠØ§Ù†Ø§Øª|ØªØ¬Ø§ÙˆØ² ØµÙ„Ø§Ø­ÙŠØ§Øª|Ø§Ø®ØªØ±Ø§Ù‚ Ù†Ø¸Ø§Ù…|ÙˆØµÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­/,
    verdict: "forbidden",
    warning: "âŒ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø®Ø§Ù„Ù Ù„Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ.",
    verse: "ï´¿ÙˆÙŽÙ„ÙŽØ§ ØªÙŽØ£Ù’ÙƒÙÙ„ÙÙˆØ§ Ø£ÙŽÙ…Ù’ÙˆÙŽØ§Ù„ÙŽÙƒÙÙ… Ø¨ÙŽÙŠÙ’Ù†ÙŽÙƒÙÙ… Ø¨ÙØ§Ù„Ù’Ø¨ÙŽØ§Ø·ÙÙ„Ùï´¾ [Ø§Ù„Ø¨Ù‚Ø±Ø©: Ù¡Ù¨Ù¨]"
  },
  
  // âš ï¸ Ø­Ø³Ø§Ø³ â€” ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚Ø©
  {
    name: "Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ©",
    pattern: /Ø§Ø³Ù…|Ø¨Ø±ÙŠØ¯|Ø¥ÙŠÙ…ÙŠÙ„|Ù‡Ø§ØªÙ|Ø¬ÙˆØ§Ù„|Ø±Ù‚Ù… Ù‚ÙˆÙ…ÙŠ|Ø¹Ù†ÙˆØ§Ù†|ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©|Ø³Ø¬Ù„ Ø·Ø¨ÙŠ|Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨|Ø¨Ø·Ø§Ù‚Ø© Ø´Ø®ØµÙŠØ©|Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…ÙŠÙ„|CRM/,
    verdict: "sensitive",
    warning: "âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ø£ØªÙ…ØªØ© ØªØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ©.\nÙ‡Ù„ ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØ§ÙÙ‚Ø© ØµØ±ÙŠØ­Ø©ØŸ",
    verse: "ï´¿ÙŠÙŽØ§ Ø£ÙŽÙŠÙÙ‘Ù‡ÙŽØ§ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ Ù„ÙŽØ§ ØªÙŽØ®ÙÙˆÙ†ÙÙˆØ§ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ ÙˆÙŽØ§Ù„Ø±ÙŽÙ‘Ø³ÙÙˆÙ„ÙŽ ÙˆÙŽØªÙŽØ®ÙÙˆÙ†ÙÙˆØ§ Ø£ÙŽÙ…ÙŽØ§Ù†ÙŽØ§ØªÙÙƒÙÙ…Ù’ ÙˆÙŽØ£ÙŽÙ†ØªÙÙ…Ù’ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽï´¾ [Ø§Ù„Ø£Ù†ÙØ§Ù„: Ù¢Ù§]"
  },
  
  // âœ… Ù…ÙØ³ØªØ­Ø¨ â€” ÙŠÙØ´Ø¬Ù‘Ø¹
  {
    name: "Ø­ÙØ¸ ÙˆÙ†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ",
    pattern: /Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ|Ø£Ø±Ø´ÙØ©|Ù†Ø³Ø®|Ø­ÙØ¸|backup|archive|log|Ø³Ø¬Ù„Ø§Øª|ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ/,
    verdict: "encouraged",
    warning: "",
    verse: "ï´¿ÙˆÙŽØ£ÙŽØ¹ÙØ¯ÙÙ‘ÙˆØ§ Ù„ÙŽÙ‡ÙÙ… Ù…ÙŽÙ‘Ø§ Ø§Ø³Ù’ØªÙŽØ·ÙŽØ¹Ù’ØªÙÙ… Ù…ÙÙ‘Ù† Ù‚ÙÙˆÙŽÙ‘Ø©Ùï´¾ [Ø§Ù„Ø£Ù†ÙØ§Ù„: Ù¦Ù ] â€” ÙˆÙ…Ù† Ø§Ù„Ù‚ÙˆØ©: Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ£Ù…ÙŠÙ†Ù‡Ø§."
  },
  
  // âœ… Ù…ÙÙŠØ¯ â€” ØªØ·ÙˆÙŠØ± Ø°Ø§ØªÙŠ
  {
    name: "ØªØ¹Ù„ÙŠÙ… ÙˆØªØ¯Ø±ÙŠØ¨",
    pattern: /ØªØ¹Ù„ÙŠÙ…|ØªØ¯Ø±ÙŠØ¨|Ø¯ÙˆØ±Ø©|ÙˆØ±Ø´Ø©|Ø´Ø±Ø­|Ø¯Ø±ÙˆØ³|ØªØ¹Ù„ÙŠÙ… Ø¢Ù„ÙŠ|AI Ù„Ù„Ø®ÙŠØ±/,
    verdict: "encouraged",
    warning: "",
    verse: "ï´¿Ù‚ÙÙ„Ù’ Ù‡ÙŽÙ„Ù’ ÙŠÙŽØ³Ù’ØªÙŽÙˆÙÙŠ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ ÙŠÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ ÙˆÙŽØ§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ù„ÙŽØ§ ÙŠÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽï´¾ [Ø§Ù„Ø²Ù…Ø±: Ù©]"
  }
];

function evaluateEthics(description) {
  // ØªØ£ÙƒØ¯ Ù…Ù† Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  const text = description.trim().toLowerCase();
  
  const matches = ETHICS_RULES
    .filter(rule => rule.pattern.test(text))
    .map(rule => ({
      rule: rule.name,
      verdict: rule.verdict,
      warning: rule.warning,
      verse: rule.verse
    }));

  const isAllowed = !matches.some(m => m.verdict === "forbidden");
  
  // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
  const warnings = [...new Set(
    matches
      .filter(m => m.warning)
      .map(m => `â€¢ ${m.warning}\n${m.verse}`)
  )].join("\n\n");

  return {
    description,
    isAllowed,
    verdict: matches.length === 0 ? "neutral" : 
             matches.some(m => m.verdict === "forbidden") ? "forbidden" :
             matches.some(m => m.verdict === "sensitive") ? "sensitive" : "encouraged",
    warnings,
    matchedRules: matches.map(m => m.rule)
  };
}

module.exports = { evaluateEthics };
